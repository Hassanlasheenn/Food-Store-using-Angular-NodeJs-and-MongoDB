{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { Subject, takeUntil } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"src/app/services/user.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"ngx-toastr\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"../../components/title/title.component\";\nfunction LoginPageComponent_p_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.errorMsg);\n  }\n}\nfunction LoginPageComponent_div_10_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Field is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginPageComponent_div_10_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Email is not correct\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginPageComponent_div_10_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Email should be less than 5\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginPageComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵtemplate(1, LoginPageComponent_div_10_div_1_Template, 2, 0, \"div\", 20);\n    i0.ɵɵtemplate(2, LoginPageComponent_div_10_div_2_Template, 2, 0, \"div\", 20);\n    i0.ɵɵtemplate(3, LoginPageComponent_div_10_div_3_Template, 2, 0, \"div\", 20);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.fc.email.errors.required);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.fc.email.errors.email);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.fc.email.errors.maxlength);\n  }\n}\nfunction LoginPageComponent_img_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 21);\n  }\n}\nfunction LoginPageComponent_img_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 22);\n  }\n}\nfunction LoginPageComponent_div_19_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Field is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginPageComponent_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵtemplate(1, LoginPageComponent_div_19_div_1_Template, 2, 0, \"div\", 20);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.fc.password.errors.required);\n  }\n}\nconst _c0 = function (a0, a1) {\n  return {\n    \"error\": a0,\n    \"valid\": a1\n  };\n};\nexport let LoginPageComponent = /*#__PURE__*/(() => {\n  class LoginPageComponent {\n    get fc() {\n      return this.loginForm.controls;\n    }\n    constructor(_fb, _userService, _activatedRoute, _router, toastr) {\n      this._fb = _fb;\n      this._userService = _userService;\n      this._activatedRoute = _activatedRoute;\n      this._router = _router;\n      this.toastr = toastr;\n      this._destroy$ = new Subject();\n      this.isSubmitted = false;\n      this.returnUrl = '';\n      this.isPasswordVisible = false;\n      this.errorMsg = '';\n    }\n    ngOnInit() {\n      this.initForm();\n      if (this._userService.isLoggedIn()) {\n        this._router.navigateByUrl('/home');\n      } else {\n        this.returnUrl = this._activatedRoute.snapshot.queryParams.returnUrl || '/login';\n      }\n    }\n    initForm() {\n      this.loginForm = this._fb.group({\n        email: ['', [Validators.required, Validators.email, Validators.maxLength(50)]],\n        password: ['', Validators.required]\n      });\n    }\n    togglePasswordVisibility() {\n      this.isPasswordVisible = !this.isPasswordVisible;\n    }\n    login() {\n      const loginRequest = {\n        email: this.loginForm.get('email')?.value,\n        password: this.loginForm.get('password')?.value\n      };\n      this._userService.login(loginRequest).pipe(takeUntil(this._destroy$)).subscribe({\n        next: res => {\n          if (!res) return;\n          if (res) {\n            this._userService.setUser = res;\n            this._userService.setUserLocalStorage(res);\n            this.toastr.success(\"User Logged Successfully\", 'Success');\n            setTimeout(() => {\n              this._router.navigateByUrl(this.returnUrl);\n            }, 1000);\n          }\n        },\n        error: err => {\n          console.log(err);\n          this.errorMsg = err?.error?.message;\n        }\n      });\n    }\n    onSubmit() {\n      if (this.loginForm?.invalid) {\n        this.isSubmitted = true;\n      } else {\n        this.isSubmitted = false;\n        this.login();\n      }\n    }\n    ngOnDestroy() {\n      this._destroy$.next();\n      this._destroy$.complete();\n    }\n    static {\n      this.ɵfac = function LoginPageComponent_Factory(t) {\n        return new (t || LoginPageComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.UserService), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.ToastrService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: LoginPageComponent,\n        selectors: [[\"app-login-page\"]],\n        decls: 29,\n        vars: 15,\n        consts: [[1, \"container\"], [1, \"container__details\"], [\"title\", \"Login\", 1, \"container__details__title\"], [\"class\", \"container__details__error\", 4, \"ngIf\"], [1, \"container__form\", 3, \"formGroup\"], [1, \"container__form__input-container\"], [1, \"container__form__inputs\"], [\"type\", \"email\", \"placeholder\", \"Enter your Email\", \"formControlName\", \"email\", 1, \"container__form__inputs__email\", 3, \"ngClass\"], [\"class\", \"error-list\", 4, \"ngIf\"], [\"placeholder\", \"Enter your Password\", \"formControlName\", \"password\", 1, \"container__form__inputs__password\", 3, \"type\", \"ngClass\"], [1, \"container__form__inputs__eye\", 3, \"click\"], [\"src\", \"../../../assets/icons/21032633001644650691.svg\", \"alt\", \"eye\", 4, \"ngIf\"], [\"src\", \"../../../assets/icons/21260910731571183076.svg\", \"alt\", \"eye-slash\", 4, \"ngIf\"], [\"routerLink\", \"/reset\", 1, \"container__form__inputs__password__forgot\"], [1, \"container__form__button\"], [\"type\", \"submit\", 1, \"container__form__button__login-btn\", 3, \"click\"], [1, \"container__form__already_user\"], [\"routerLink\", \"/register\", 1, \"container__form__already_user-sign-up\"], [1, \"container__details__error\"], [1, \"error-list\"], [4, \"ngIf\"], [\"src\", \"../../../assets/icons/21032633001644650691.svg\", \"alt\", \"eye\"], [\"src\", \"../../../assets/icons/21260910731571183076.svg\", \"alt\", \"eye-slash\"]],\n        template: function LoginPageComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"section\", 0)(1, \"div\", 1);\n            i0.ɵɵelement(2, \"app-title\", 2);\n            i0.ɵɵtemplate(3, LoginPageComponent_p_3_Template, 2, 1, \"p\", 3);\n            i0.ɵɵelementStart(4, \"form\", 4)(5, \"div\", 5)(6, \"label\");\n            i0.ɵɵtext(7, \"Email\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"div\", 6);\n            i0.ɵɵelement(9, \"input\", 7);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(10, LoginPageComponent_div_10_Template, 4, 3, \"div\", 8);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(11, \"div\", 5)(12, \"label\");\n            i0.ɵɵtext(13, \"Password\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(14, \"div\", 6);\n            i0.ɵɵelement(15, \"input\", 9);\n            i0.ɵɵelementStart(16, \"div\", 10);\n            i0.ɵɵlistener(\"click\", function LoginPageComponent_Template_div_click_16_listener() {\n              return ctx.togglePasswordVisibility();\n            });\n            i0.ɵɵtemplate(17, LoginPageComponent_img_17_Template, 1, 0, \"img\", 11);\n            i0.ɵɵtemplate(18, LoginPageComponent_img_18_Template, 1, 0, \"img\", 12);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(19, LoginPageComponent_div_19_Template, 2, 1, \"div\", 8);\n            i0.ɵɵelementStart(20, \"a\", 13);\n            i0.ɵɵtext(21, \"Forgot your password?\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(22, \"div\", 14)(23, \"button\", 15);\n            i0.ɵɵlistener(\"click\", function LoginPageComponent_Template_button_click_23_listener() {\n              return ctx.onSubmit();\n            });\n            i0.ɵɵtext(24, \"Login\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(25, \"div\", 16);\n            i0.ɵɵtext(26, \" New User? \");\n            i0.ɵɵelementStart(27, \"a\", 17);\n            i0.ɵɵtext(28, \"Register\");\n            i0.ɵɵelementEnd()()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ctx.errorMsg);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"formGroup\", ctx.loginForm);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(9, _c0, ctx.fc.email.errors && ctx.isSubmitted, ctx.fc.email.valid));\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.fc.email.errors && ctx.isSubmitted);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"type\", ctx.isPasswordVisible ? \"text\" : \"password\")(\"ngClass\", i0.ɵɵpureFunction2(12, _c0, ctx.fc.password.errors && ctx.isSubmitted, ctx.fc.password.valid));\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.isPasswordVisible);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", !ctx.isPasswordVisible);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.fc.password.errors && ctx.isSubmitted);\n          }\n        },\n        dependencies: [i5.NgClass, i5.NgIf, i3.RouterLink, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i6.TitleComponent],\n        styles: [\".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background-color:var(--primary-login-bg-color);height:94.5vh}.container__details[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:3rem;margin:0;border:1px solid #e72929;border-radius:2rem;background-color:var(--primary-login-bg-form);max-width:90%;box-sizing:border-box}.container__details__title[_ngcontent-%COMP%]{margin-bottom:3rem}.container__details__error[_ngcontent-%COMP%]{color:var(--primary-text-color);background-color:red;padding:1rem}.container__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:1rem;text-align:center}.container__form__inputs[_ngcontent-%COMP%]{position:relative}.container__form__inputs__email[_ngcontent-%COMP%], .container__form__inputs__password[_ngcontent-%COMP%]{padding:.7rem 2rem;border-radius:2rem;border:1px solid transparent;margin-top:1rem;outline:none;transition:border .3s ease-in-out;width:100%}.container__form__inputs__email[_ngcontent-%COMP%]:focus, .container__form__inputs__password[_ngcontent-%COMP%]:focus{border:1px solid #e72929}.container__form__inputs__email.error[_ngcontent-%COMP%], .container__form__inputs__password.error[_ngcontent-%COMP%]{border:1px solid red}.container__form__inputs__email.valid[_ngcontent-%COMP%], .container__form__inputs__password.valid[_ngcontent-%COMP%]{border:none}.container__form__inputs__password[_ngcontent-%COMP%]{padding-right:40px}.container__form__inputs[_ngcontent-%COMP%] > .container__form__inputs__eye[_ngcontent-%COMP%]{position:absolute;width:20px;height:20px;top:10px;right:20px;cursor:pointer}.container__form__inputs__password[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.container__form__inputs__password__forgot[_ngcontent-%COMP%]{font-size:12px;color:#000}.container__form__inputs__password__forgot[_ngcontent-%COMP%]:hover{text-decoration:underline}.container__form__button[_ngcontent-%COMP%]{text-align:center;margin-top:1rem}.container__form__button__login-btn[_ngcontent-%COMP%]{padding:.5rem 1.5rem;border:none;border-radius:.5rem}.container__form__button__login-btn[_ngcontent-%COMP%]:hover{padding:.5rem 2rem;transition:.3s ease-in-out,transform .3s ease-in-out;color:#fff;background-color:#e72929;cursor:pointer}.container__form__already_user[_ngcontent-%COMP%]{font-size:14px;margin-top:.5rem}.container__form__already_user-sign-up[_ngcontent-%COMP%]{color:#000}.container__form__already_user-sign-up[_ngcontent-%COMP%]:hover{text-decoration:underline}.error-list[_ngcontent-%COMP%]{color:red;font-size:12px}\"]\n      });\n    }\n  }\n  return LoginPageComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}